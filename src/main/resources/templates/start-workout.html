<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <a th:href="@{/workouts}" class="btn">Back to Workouts</a>
    <h2 th:text="'Start Workout: ' + ${workout.name}">Start Workout</h2>
    <form th:action="@{/workouts/complete/{id}(id=${workout.id})}" th:object="${workoutCompletionForm}" method="post">
        <h3>Exercises</h3>
        <ul>
            <li th:each="exerciseData, exerciseStat : ${workoutCompletionForm.exercises}">
                <strong th:text="${exerciseData.exerciseName}">Exercise Name</strong>
                <p>
                    <input type="hidden" th:field="*{exercises[__${exerciseStat.index}__].exerciseId}">
                    <input type="hidden" th:field="*{exercises[__${exerciseStat.index}__].exerciseName}">
                    <table>
                        <thead>
                            <tr>
                                <th>Set #</th>
                                <th>Reps</th>
                                <th>Weight</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="setData, setStat : ${exerciseData.setData}">
                                <td>
                                    <input type="hidden" th:field="*{exercises[__${exerciseStat.index}__].setData[__${setStat.index}__].setNumber}" th:value="${setData.setNumber}">
                                    <span th:text="${setData.setNumber}">Set Number</span>
                                </td>
                                <td>
                                    <input type="number" th:field="*{exercises[__${exerciseStat.index}__].setData[__${setStat.index}__].reps}" step="1" required>
                                </td>
                                <td>
                                    <input type="number" th:field="*{exercises[__${exerciseStat.index}__].setData[__${setStat.index}__].weight}" step="0.50" required>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    Exercise Notes (optional):
                    <input type="text" th:field="*{exercises[__${exerciseStat.index}__].exerciseNotes}">
                    <br>
                </p>
            </li>
        </ul>
        <label for="workoutNotes">Workout Notes (optional):</label><br>
        <textarea th:field="*{workoutNotes}" rows="4" cols="50"></textarea><br><br>

        <button type="submit">Complete Workout</button>
    </form>
</body>
</html>
